<div class="game-board">
  <!-- Header -->
  <div class="game-header">
    <h1 class="game-title">ðŸ¦— Go <s>&nbsp;Fish</s>&nbsp;<s>Cricut&nbsp;</s> Cricket! ðŸ¦—</h1>
  </div>

  <!-- Score Board -->
  <app-score-board
    [players]="(players$ | async) || []"
    [currentPlayer]="(currentPlayer$ | async) || null"
  >
  </app-score-board>

  <!-- Game Messages -->
  @if((messages$ | async)?.length) {
  <div class="game-messages">
    <div class="messages-container">
      @for(message of getRecentMessages(messages$ | async); track $index; ) {
      <div class="game-message" [class]="'message-' + message.type">
        <span class="message-time">{{ formatTime(message.timestamp) }}</span>
        <span class="message-text">{{ message.message }}</span>
      </div>
      }
    </div>
  </div>
  }

  <!-- Main Game Area -->
  @if(gameState$ | async) {
  <div class="game-area">
    <app-player-hand
      [player]="(currentPlayer$ | async) || null"
      [otherPlayers]="(otherPlayers$ | async) || []"
      [canPlay]="(canPlay$ | async) || false"
      (cardRequest)="onCardRequest($event)"
    >
    </app-player-hand>
  </div>
  }

  <!-- Game Controls -->
  <app-game-controls
    [gamePhase]="(gamePhase$ | async) || GamePhase.SETUP"
    [winner]="(winner$ | async) || null"
    [winners]="(winners$ | async) || []"
    [gameStartTime]="(gameState$ | async)?.gameStartTime || currentTime"
    (resetGame)="resetGame()"
  >
  </app-game-controls>

  <!-- Card Animation Overlay -->
  @if((gameState$ | async)?.isAnimating) {
  <div class="card-animation-overlay">
    <div class="animation-content">
      <div class="deck-to-hand-animation">
        <div class="deck-position">
          <app-card [card]="createDeckCard()" class="deck-card"></app-card>
        </div>
        <div class="arrow-animation">â†’</div>
        <div class="hand-position">
          <app-card
            [card]="(gameState$ | async)?.animatingCard || createDeckCard()"
            class="drawn-card"
          >
          </app-card>
        </div>
      </div>
      <div class="animation-text">Drawing card from deck...</div>
    </div>
  </div>
  }

  <!-- Loading Overlay -->
  @if((gamePhase$ | async) === 'setup') {
  <div class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Setting up your Go Cricket game...</div>
    </div>
  </div>
  }
</div>
